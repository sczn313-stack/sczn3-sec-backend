import express from "express"; import cors from "cors"; import multer from "multer"; const app = express(); const PORT = process.env.PORT || 10000; app.use(cors()); app.use(express.json()); const upload = multer({ storage: multer.memoryStorage(), limits: { fileSize: 10 * 1024 * 1024 }, // 10MB }); app.get("/", (req, res) => { res.json({ status: "ok", service: "SCZN3 backend" }); }); app.get("/health", (req, res) => { res.json({ ok: true }); }); app.post("/api/upload", upload.any(), (req, res) => { const files = req.files; const file = Array.isArray(files) && files.length ? files[0] : null; if (!file) { return res.status(400).json({ ok: false, error: "No file uploaded" }); } return res.json({ ok: true, message: "Image received", filename: file.originalname, mimetype: file.mimetype, size: file.size, }); }); app.listen(PORT, () => { console.log(`SCZN3 backend listening on port ${PORT}`); });
